<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fixbionic | Registro de Accesorios</title>

  <!-- Bootstrap y Estilos -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    :root {
      --primary-color: #ffffff;
      --secondary-color: #FF7F00;
      --secondary-light: #FFA34D;
      --secondary-dark: #CC6600;
      --text-color: #333333;
      --text-light: #666666;
      --glass-bg: rgba(255, 255, 255, 0.7);
      --glass-border: rgba(255, 255, 255, 0.8);
      --glass-shadow: rgba(0, 0, 0, 0.1);
    }

    body {
      background-color: var(--primary-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      background-image: 
        radial-gradient(circle at 15% 50%, rgba(255, 165, 0, 0.05) 0%, transparent 25%),
        radial-gradient(circle at 85% 30%, rgba(255, 165, 0, 0.05) 0%, transparent 25%);
    }

    /* Efecto de vidrio líquido (glassmorphism) */
    .glass-effect {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      box-shadow: 0 8px 32px var(--glass-shadow);
      border-radius: 12px;
    }

    /* Sidebar con efecto de vidrio */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 250px;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-right: 1px solid rgba(255, 255, 255, 0.9);
      box-shadow: 4px 0 16px rgba(0, 0, 0, 0.05);
      z-index: 1000;
      overflow-y: auto;
    }

    .sidebar h4 {
      color: var(--secondary-color);
      font-weight: 700;
      text-align: center;
      padding: 1rem 0;
      border-bottom: 2px solid var(--secondary-light);
      margin-bottom: 1.5rem;
    }

    .nav-link {
      color: var(--text-color);
      padding: 0.75rem 1rem;
      margin: 0.25rem 0;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .nav-link:hover, .nav-link.active {
      background-color: var(--secondary-light);
      color: white;
    }

    .accordion-button {
      background-color: var(--secondary-color) !important;
      color: white !important;
      border-radius: 8px !important;
      font-weight: 600;
    }

    .accordion-button:not(.collapsed) {
      box-shadow: 0 0 0 0.2rem rgba(255, 127, 0, 0.25);
    }

    /* Contenido principal */
    .main-content {
      margin-left: 250px;
      padding: 2rem;
    }

    @media (max-width: 992px) {
      .sidebar {
        width: 80px;
        padding: 1rem 0.5rem;
      }
      .sidebar h4 {
        font-size: 1rem;
        writing-mode: vertical-rl;
        text-orientation: mixed;
        margin: 0 auto;
      }
      .nav-link span {
        display: none;
      }
      .main-content {
        margin-left: 80px;
      }
    }

    /* Títulos */
    h2 {
      color: var(--secondary-color);
      font-weight: 700;
      position: relative;
      padding-bottom: 0.5rem;
    }

    h2:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 4px;
      background: var(--secondary-color);
      border-radius: 2px;
    }

    /* Formularios */
    .form-label {
      font-weight: 600;
      color: var(--text-light);
      margin-bottom: 0.5rem;
    }

    .form-control, .form-select {
      border-radius: 8px;
      padding: 0.75rem 1rem;
      border: 1px solid #ddd;
      transition: all 0.3s;
    }

    .form-control:focus, .form-select:focus {
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 0.2rem rgba(255, 127, 0, 0.25);
    }

    /* Botones */
    .btn {
      border-radius: 8px;
      padding: 0.5rem 1.5rem;
      font-weight: 600;
      transition: all 0.3s;
    }

    .btn-primary {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
    }

    .btn-primary:hover {
      background-color: var(--secondary-dark);
      border-color: var(--secondary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .btn-warning {
      background-color: #ffc107;
      border-color: #ffc107;
    }

    .btn-danger {
      background-color: #dc3545;
      border-color: #dc3545;
    }

    .btn-outline-success {
      color: #198754;
      border-color: #198754;
    }

    .btn-outline-secondary {
      color: #6c757d;
      border-color: #6c757d;
    }

    .btn-group .btn {
      border-radius: 6px;
      margin: 0 0.25rem 0.25rem 0;
    }

    /* Tablas */
    .table {
      border-radius: 8px;
      overflow: hidden;
    }

    .table thead th {
      background-color: var(--secondary-color);
      color: white;
      border: none;
      padding: 1rem;
      font-weight: 600;
    }

    .table tbody td {
      padding: 1rem;
      vertical-align: middle;
    }

    .table-striped tbody tr:nth-of-type(odd) {
      background-color: rgba(255, 163, 77, 0.1);
    }

    .table-hover tbody tr:hover {
      background-color: rgba(255, 163, 77, 0.2);
    }

    /* Tarjetas con efecto de vidrio */
    .card {
      border: none;
      border-radius: 12px;
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px var(--glass-shadow);
    }

    /* Modal */
    .modal-content {
      border-radius: 12px;
      overflow: hidden;
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid var(--glass-border);
    }

    .modal-header {
      background-color: var(--secondary-color);
      color: white;
    }

    /* Animaciones suaves */
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Mejoras visuales para elementos específicos */
    #graficoAccesorios {
      border-radius: 12px;
      background: white;
      padding: 1rem;
    }

    .metrics-card {
      transition: transform 0.3s;
    }

    .metrics-card:hover {
      transform: translateY(-5px);
    }
  </style>
</head>

<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <h4>Fixbionic</h4>
    <div class="accordion" id="menuAccordion">
      <div class="accordion-item bg-transparent border-0">
        <h2 class="accordion-header">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#modulosMenu">
            Menú
          </button>
        </h2>
        <div id="modulosMenu" class="accordion-collapse collapse show">
          <div class="accordion-body p-0">
            <a class="nav-link" href="../../index.html">
              <i class="bi bi-house-door me-2"></i><span>Inicio</span>
            </a>
            <a class="nav-link active" href="acsesorios.html">
              <i class="bi bi-plugin me-2"></i><span>Accesorios</span>
            </a>
            <a class="nav-link" href="estadisticas.html">
              <i class="bi bi-bar-chart me-2"></i><span>Estadísticas</span>
            </a>
            <a class="nav-link" href="reparacion.html">
              <i class="bi bi-tools me-2"></i><span>Reparaciones</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Contenido Principal -->
  <main class="main-content fade-in">
    <h2 class="mb-4">Registro de Accesorios</h2>
    
    <!-- Formulario de Accesorios -->
    <form id="form-accesorios" class="glass-effect p-4 mb-4">
      <div class="row g-3">
        <!-- Fecha -->
        <div class="col-md-6">
          <label for="fechaAcc" class="form-label">Fecha</label>
          <input 
            type="date" 
            id="fechaAcc" 
            class="form-control" 
            required
          />
        </div>

        <!-- Nombre del accesorio -->
        <div class="col-md-6">
          <label for="nombreAcc" class="form-label">Nombre del accesorio</label>
          <select id="nombreAcc" class="form-select" required>
            <option value="">Seleccionar...</option>
            <option value="Cargador rápido">Cargador rápido</option>
            <option value="Cable USB-C">Cable USB-C</option>
            <option value="Cable Lightning">Cable Lightning</option>
            <option value="Cable Micro-USB">Cable Micro-USB</option>
            <option value="Audífonos Bluetooth">Audífonos Bluetooth</option>
            <option value="Audífonos con cable">Audífonos con cable</option>
            <option value="Funda protectora">Funda protectora</option>
            <option value="Vidrio templado">Vidrio templado</option>
            <option value="Cargador inalámbrico">Cargador inalámbrico</option>
            <option value="Batería externa">Batería externa</option>
            <option value="Hidro">Hidro gel</option>
          </select>
        </div>

        <!-- Precio -->
        <div class="col-md-6">
          <label for="precioAcc" class="form-label">Precio (COP)</label>
          <select id="precioAcc" class="form-select" required>
            <option value="">Seleccionar...</option>
            <option value="10000">10.000</option>
            <option value="15000">15.000</option>
            <option value="20000">20.000</option>
            <option value="25000">25.000</option>
            <option value="30000">30.000</option>
            <option value="40000">40.000</option>
            <option value="50000">50.000</option>
            <option value="60000">60.000</option>
            <option value="80000">80.000</option>
            <option value="100000">100.000</option>
          </select>
        </div>

        <!-- Cliente -->
        <div class="col-md-6">
          <label for="clienteAcc" class="form-label">De - Para</label>
          <input 
            type="text" 
            id="clienteAcc" 
            class="form-control" 
            placeholder="Ej: Juan Pérez" 
            maxlength="50"
            required
          />
        </div>
      </div>

      <!-- Botón de envío -->
      <div class="mt-4 text-end">
        <button type="submit" class="btn btn-primary px-4">
          <i class="bi bi-save me-2"></i>Guardar
        </button>
      </div>
    </form>

    <!-- Botones del formulario -->
    <div class="btn-group mt-3 flex-wrap">
      <button type="button" id="btnEditar" class="btn btn-warning btn-sm">
        <i class="bi bi-pencil me-1"></i>Editar
      </button>
      <button type="button" id="btnEliminar" class="btn btn-danger btn-sm">
        <i class="bi bi-trash me-1"></i>Eliminar
      </button>
      <button type="button" id="exportarImagenBtn" class="btn btn-dark btn-sm">
        <i class="bi bi-image me-1"></i>Imagen
      </button>
      <button type="button" id="exportarExcelBtn" class="btn btn-outline-success btn-sm">
        <i class="bi bi-file-earmark-spreadsheet me-1"></i>Excel
      </button>
      <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#modalCopiasJson">
        <i class="bi bi-archive me-1"></i>Copia y JSON
      </button>
      <input type="file" id="importarBD" accept=".json" class="form-control form-control-sm ms-2 d-inline-block" style="max-width: 200px;" />
    </div>

    <!-- Tabla de accesorios -->
    <div class="row g-4 mt-3">
      <div class="col-lg-8">
        <div class="glass-effect p-3 rounded mb-4">
          <div class="table-responsive">
            <table class="table table-bordered table-striped table-hover text-center align-middle">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Nombre</th>
                  <th>Precio</th>
                  <th>Cliente</th>
                </tr>
              </thead>
              <tbody id="tabla-accesorios"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="glass-effect p-4 text-center h-100 metrics-card">
          <h5 class="fw-bold mb-4" style="color: var(--secondary-color);">Métricas del Inventario</h5>
          <canvas id="graficoAccesorios" class="mb-3" style="max-width: 100%; height: auto;"></canvas>
          <table class="table table-sm mt-3">
            <thead>
              <tr>
                <th>Total Registros</th>
                <th>Total Unidades</th>
                <th>Valor Total (COP)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td id="total-registros">0</td>
                <td id="total-unidades">0</td>
                <td id="valor-total">0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal unificado: Copia y JSON -->
  <div class="modal fade" id="modalCopiasJson" tabindex="-1" aria-labelledby="modalCopiasJsonLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalCopiasJsonLabel">Exportar Base de Datos</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body text-center">
          <p class="mb-4">¿Qué deseas hacer con la base de datos actual?</p>
          <div class="d-flex justify-content-center gap-2 flex-wrap">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-success" id="btn-exportar-json">
              <i class="bi bi-code-slash me-1"></i>Guardar JSON
            </button>
            <button type="button" class="btn btn-primary" id="btn-agregar-copia">
              <i class="bi bi-plus-circle me-1"></i>Agregar copia de seguridad
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para ver copias guardadas -->
  <div class="modal fade" id="modalCopias" tabindex="-1" aria-labelledby="modalCopiasLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalCopiasLabel">Copias de Seguridad Guardadas</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-bordered text-center">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Fecha</th>
                  <th>Tipo</th>
                  <th>Acción</th>
                </tr>
              </thead>
              <tbody id="tabla-copias-body"></tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Script básico para simular funcionalidad (sustituye por tus scripts reales)
    document.addEventListener('DOMContentLoaded', function() {
      // Simular datos de ejemplo en la tabla
      const tabla = document.getElementById('tabla-accesorios');
      const datosEjemplo = [
        { fecha: '2023-10-15', nombre: 'Cargador rápido', precio: '20000', cliente: 'María López' },
        { fecha: '2023-10-16', nombre: 'Cable USB-C', precio: '15000', cliente: 'Carlos Rodríguez' },
        { fecha: '2023-10-17', nombre: 'Vidrio templado', precio: '25000', cliente: 'Ana Martínez' }
      ];
      
      datosEjemplo.forEach(dato => {
        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td>${dato.fecha}</td>
          <td>${dato.nombre}</td>
          <td>$${parseInt(dato.precio).toLocaleString('es-CO')}</td>
          <td>${dato.cliente}</td>
        `;
        tabla.appendChild(fila);
      });
      
      // Actualizar métricas
      document.getElementById('total-registros').textContent = datosEjemplo.length;
      document.getElementById('total-unidades').textContent = datosEjemplo.length;
      document.getElementById('valor-total').textContent = '$' + datosEjemplo.reduce((sum, item) => sum + parseInt(item.precio), 0).toLocaleString('es-CO');
      
      // Simular gráfico (en una implementación real usarías Chart.js)
      const canvas = document.getElementById('graficoAccesorios');
      const ctx = canvas.getContext('2d');
      
      // Dibujar un gráfico de ejemplo
      ctx.fillStyle = '#FF7F00';
      ctx.fillRect(50, 150, 40, -50);
      ctx.fillRect(100, 150, 40, -80);
      ctx.fillRect(150, 150, 40, -30);
      ctx.fillRect(200, 150, 40, -60);
      
      // Añadir ejes
      ctx.beginPath();
      ctx.moveTo(40, 20);
      ctx.lineTo(40, 150);
      ctx.lineTo(250, 150);
      ctx.strokeStyle = '#333';
      ctx.stroke();
      
      // Añadir etiquetas simples
      ctx.fillStyle = '#333';
      ctx.fillText('Accesorios', 10, 100);
      ctx.fillText('Ventas', 130, 180);
    });
  </script>
</body>
</html>